<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

    <style>
     *{
         background-color: rgb(212, 134, 134);
     }
     img{
         width:20%;
         height:20%;
     }
     

    </style>
    
    <body>
    <h1>Movie Search Engine I</h1>
    <input oninput="debounce(main,1000)"type="text" id="Search" placeholder="Search Name"/>
    <button onclick="Movie_Search()">search</button>

     <div id="movies"></div>
     <div id="movies1"></div>

    </body>

    
<script>
    
       
    let container=document.getElementById("movies1");

   async function Movie_Search()
   {
       let Search=document.getElementById("Search").value;

       
       let res=await fetch(`http://www.omdbapi.com/?t=${Search}&apikey=c8bca29b`);
       
        let movies= await res.json();
        showMovies(movies);
        console.log(movies);
   }

   function showMovies(rating)
   {
      container.innerHTML=null;
     let div=document.createElement('div');
       let name=document.createElement("p");
         name.innerText=rating.Title;
         let img=document.createElement("img");
           img.src=rating.Poster;
         let imdb_rating = document.createElement("p");
         imdb_rating.innerText=rating.imdbRating;
         let year=document.createElement("p");
          year.innerText=rating.Year;
        
          
          let img2=document.createElement("img");
           img2.src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQQL7a8k-zfCnGJL-oHJj3n35VLh3G2SHnncw&usqp=CAU";
          
         
        
         if(Number(rating.imdbRating) >= 8.5)
         {
             
            div.append(img,name,imdb_rating,img2,year);
            
         }
         else
         {
         div.append(img,name,imdb_rating,year);
       
        }
        container.append(div);
        
   }
   
 
 async function main(){
 
 let name=document.getElementById("movie").value;

 //get search Movies

 if(name.length<3){
     return false;
 }

 let res=await searchMovies(name);

 let movies_data=res.Search;

 appendMovies(movies_data);

 console.log("res:",res);

}


function debounce(func,delay){

 //func = main() function

 //ave - setTimeout - func -main()
 //aven - clear the previous timeout - settimeout - func() - main()- searchMovies("aven")

 if(timerId){
     clearTimeout(timerId);
 }

 timerId=setTimeout(function(){

     func();


 },delay);




}

   </script>